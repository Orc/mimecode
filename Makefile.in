#
# makefile for unravel
#

CC=@CC@
CXX=@CC@
CFLAGS += @CFLAGS@ -DVERSION=\"@VERSION@\"
CXXFLAGS=$(CFLAGS)

BINDIR=@exedir@
MANDIR=@mandir@

MANPAGES=ravel.1 unravel.1 uudecode.1
PROGS= ravel unravel

all: $(PROGS)

ravel: ravel.o qp.o base64.o @OPTIONS@
	$(CC) $(CFLAGS) -o ravel ravel.o qp.o base64.o @LIBS@ @OPTIONS@

unravel: unravel.o qp.o base64.o clear.o openfile.o uudecode.o @OPTIONS@
	$(CC) $(CFLAGS) -o unravel unravel.o qp.o base64.o clear.o \
				   uudecode.o openfile.o @LIBS@ @OPTIONS@

clean:
	rm -f ravel unravel *.o

distclean spotless: clean
	rm -f @CONFIGURE_FILES@ @GENERATED_FILES@

install: install.bin install.man

install.bin: $(PROGS)
	@INSTALL_DIR@ $(DESTDIR)$(BINDIR)
	@INSTALL_PROGRAM@ $(PROGS) $(DESTDIR)$(BINDIR)
	ln -fs unravel $(DESTDIR)$(BINDIR)/uudecode

install.man: install_manpages $(MANPAGES)
	./install_manpages $(MANDIR) $(DESTDIR)$(MANPAGES)
